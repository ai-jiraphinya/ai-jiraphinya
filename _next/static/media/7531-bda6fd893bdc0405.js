"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7531],{89351:function(e,t,n){n.d(t,{Z:function(){return m}});var a=n(27573),r=n(67382),s=n(2056),o=n.n(s),l=n(5537),i=n(84862),c=n(81451),d=n(7653);function u(e){if(!e)return;let t=[...e.matchAll(function(){let e=RegExp("```(?<language>[^\\n]+)\\n(?<program>.*?)"),t=function(e){let t=[];for(let n=-1;n<e.length;n++)n<e.length-1?t.push(p(e.slice(0,n+1))+"$"):t.push(p(e));return RegExp("("+t.join("|")+")")}("\n```");return RegExp(e.source+t.source,"gs")}())];if(t){let e=t.map(e=>{var t,n;return null!==(n=null===(t=e.groups)||void 0===t?void 0:t.program)&&void 0!==n?n:""}).sort((e,t)=>t.length-e.length);return e[0]}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(){let e=function(){var e,t;let n=(0,l.CG)(e=>e.chat.conversationId);if(!n)return;let a=null!==(e=(0,r.env)("NEXT_PUBLIC_AI_APP_HOSTNAME"))&&void 0!==e?e:"www.pulumi.com",s=null!==(t=(0,r.env)("NEXT_PUBLIC_CLOUD_APP_HOSTNAME"))&&void 0!==t?t:"app.pulumi.com",o=new URL("https://".concat(a).concat("/ai","/api/project/").concat(n,".zip")),i=new URL("https://".concat(s,"/new"));return i.searchParams.set("template",o.toString()),i.toString()}(),t=(0,l.CG)(e=>e.chat.language),n=(0,l.CG)(i.xU),s=(0,d.useCallback)(e=>{n&&e.preventDefault()},[n]),p=function(){let e=(0,l.CG)(e=>{var t;return null===(t=e.chat.versions.at(-2))||void 0===t?void 0:t.response}),t=(0,l.CG)(e=>{var t;return null===(t=e.chat.versions.at(-1))||void 0===t?void 0:t.response}),n=(0,d.useMemo)(()=>u(e),[e]),a=(0,d.useMemo)(()=>u(t),[t]),r=(0,l.CG)(i.xU);return(0,d.useMemo)(()=>r&&!!n||!!a,[r,n,a])}();if(!e||!p)return(0,a.jsxs)("div",{className:"prose prose-sm dark:prose-invert max-w-none mb-6",children:[(0,a.jsx)("h3",{children:"Get Started"}),(0,a.jsxs)("p",{children:["Use Pulumi AI to generate a program, or start from one of our curated"," ",(0,a.jsx)(o(),{href:"/answers",children:"AI Answers"}),"."]})]});if("Terraform"===t)return(0,a.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none mb-6",children:(0,a.jsx)(c.IV,{CodeBlock:c.vd,children:"1. [Install Pulumi](/docs/install/)\n2. Convert your Terraform code to Pulumi:\n\n   ```\n   pulumi convert --from terraform\n   ```\n\n3. Deploy with `pulumi up`\n"})});let m=n?"opacity-50 pointer-default":"",h=n?"Loading AI generated program...":"Deploy this program with Pulumi Cloud";return(0,a.jsxs)("div",{className:"prose prose-sm dark:prose-invert max-w-none mb-6",children:[(0,a.jsx)("h3",{className:"my-0",title:"Test",children:"Get Started"}),(0,a.jsx)("span",{title:h,children:(0,a.jsx)("a",{href:e.toString(),target:"_blank",className:m,onClick:s,children:(0,a.jsx)("img",{className:"my-2",alt:"Deploy with Pulumi",src:"https://pulumi.com/images/deploy-with-pulumi/light.svg"})})})]})}},2950:function(e,t,n){n.d(t,{H:function(){return a},k:function(){return r}});let a="gpt-4-turbo",r=["gpt-4","gpt-4-turbo"]},81451:function(e,t,n){n.d(t,{IV:function(){return d},vd:function(){return c}});var a=n(27573),r=n(7653),s=n(33772),o=n(11865),l=n(40319);let i=e=>{let{code:t,children:n,...s}=e,o=(0,r.useCallback)(async()=>{try{await navigator.clipboard.writeText(t)}catch(e){console.error("Unexpected error copying to clipboard",e)}},[t]);return s.style&&(delete s.style.margin,delete s.style.padding,delete s.style.background,delete s.style.backgroundColor),(0,a.jsxs)("div",{className:"relative",...s,children:[(0,a.jsx)("button",{className:"absolute btn py-2 px-3 top-3 right-3 bg-gray-700/50 border-transparent text-xs shadow-md hover:bg-gray-600 hover:border-gray-600",onClick:o,children:(0,a.jsx)("div",{className:"feedback-button",children:(0,a.jsx)("i",{className:"fas fa-copy"})})}),(0,a.jsx)("div",{className:"bg-gray-800 rounded my-1.5 p-3.5",children:n})]})},c=e=>{let{code:t,children:n,...s}=e,o=(0,r.useCallback)(async()=>{try{await navigator.clipboard.writeText(t)}catch(e){console.error("Unexpected error copying to clipboard",e)}},[t]);return s.style&&(delete s.style.margin,delete s.style.padding,delete s.style.background,delete s.style.backgroundColor),(0,a.jsxs)("div",{className:"relative",...s,children:[(0,a.jsx)("button",{className:"copy-button-container",onClick:o,children:(0,a.jsxs)("div",{className:"flex items-center font-body",children:["Copy ",(0,a.jsx)("i",{className:"fa fa-copy text-sm"})]})}),(0,a.jsx)("div",{className:"bg-gray-800 rounded my-2 p-3",children:n})]})};function d(e){let{children:t,CodeBlock:n=i}=e;return(0,a.jsx)(s.D,{className:"prose prose-sm dark:prose-invert max-w-none",components:{code(e){var t;let{node:r,inline:s,className:i,children:c,...d}=e;if(s)return(0,a.jsx)("code",{...d,style:{},className:"dark prose-invert ".concat(i),children:c});let u=/language-(\w+)/.exec(i||"");return(0,a.jsx)(o.Z,{...d,style:l.Z,language:null!==(t=null==u?void 0:u[1])&&void 0!==t?t:"",wrapLines:!0,wrapLongLines:!0,customStyle:{backgroundColor:"#603030"},codeTagProps:{className:"font-mono"},PreTag:e=>(0,a.jsx)(n,{code:String(c),...e}),children:String(c)})},a(e){let{node:t,children:n,href:r,...s}=e;return(0,a.jsx)("a",{...s,href:r,target:"_blank",children:n})}},children:t})}},68403:function(e,t,n){n.d(t,{n:function(){return o}});var a=n(27573),r=n(2056),s=n.n(r);function o(){return(0,a.jsx)(s(),{href:"/answers",title:"Start a new conversation with Pulumi AI",className:"border-blue-400 border-2 text-blue-400 inline-block rounded hover:bg-blue-900 hover:text-blue-200 transition-colors lg:w-auto outline-none cursor-pointer items-center text-sm justify-center p-3 leading-6 whitespace-nowrap",children:(0,a.jsx)("span",{children:"Browse all answers"})})}},25967:function(e,t,n){n.r(t),n.d(t,{ChatLayout:function(){return D}});var a=n(27573),r=n(51814),s=n(7653),o=n(5537),l=n(84862),i=n(25272);function c(e){let t=(0,o.TL)(),n=(0,s.useRef)(!1);(0,s.useMemo)(()=>{!n.current&&(n.current=!0,e.initialState&&(e.mock?u(t,e.initialState,e.mock):t(o.Nw.chat.init(e.initialState))))},[e,t])}let d=!1;async function u(e,t,n){var a;if(d||(d=!0,o.h.getState().chat.versions.length>0))return;let r=(0,i.DE)(o.Nw.chat,e),s=null!==(a=null==n?void 0:n.velocity)&&void 0!==a?a:1,l=e=>{if(e/s>2*Math.random())return new Promise(t=>setTimeout(t,e/s))};for(let[e,n]of(await l(1e3),t.versions.entries())){n.language&&n.language!==o.h.getState().chat.language&&(r.setLanguage(n.language),await l(30));for(let e=0;e<n.instructions.length;e+=1)r.setInput(n.instructions.slice(0,e)),await l(30);r.setInput(n.instructions),await l(100),r.addVersion({id:n.id,instructions:n.instructions,language:n.language,response:"",complete:!1}),r.setInput(""),await l(1e3);for(let t=0;t<n.response.length;t+=2+Math.floor(5*Math.random())){let a=o.h.getState().chat.versions[e].response.length;r.receiveResponseChunk({versionNumber:e,chunk:n.response.slice(a,t)}),await l(30)}r.closeVersion({versionNumber:e})}}var p=n(81451);function m(e){let{versionNumber:t}=e,n=(0,o.TL)(),{id:r,complete:l,feedbackHelpful:i,feedbackSubmitted:c}=(0,o.CG)(e=>e.chat.versions[t]),d=(0,s.useCallback)(()=>{n(o.Nw.chat.setResponseHelpful({versionNumber:t,helpful:!0}))},[n,t]),u=(0,s.useCallback)(()=>{n(o.Nw.chat.setResponseHelpful({versionNumber:t,helpful:!1}))},[n,t]),p=(0,s.useCallback)(e=>{var a;e.preventDefault(),fetch("".concat("/ai","/api/feedback"),{method:"POST",body:JSON.stringify({resultId:r,helpful:i,comments:null===(a=e.currentTarget.querySelector("textarea"))||void 0===a?void 0:a.value})}),n(o.Nw.chat.setResponseSubmitted({versionNumber:t,submitted:!0}))},[n,r,i,t]);return l?void 0===i?(0,a.jsxs)("div",{className:"text-gray-500 flex items-center mt-6",children:[(0,a.jsx)("p",{className:"my-0",children:"Was this response helpful?"}),(0,a.jsxs)("div",{className:"flex items-center ml-2",children:[(0,a.jsxs)("button",{className:"whitespace-nowrap hover:text-gray-200",onClick:d,children:[(0,a.jsx)("i",{className:"fas fa-thumbs-up"}),(0,a.jsx)("span",{className:"ml-1",children:"Yes"})]}),(0,a.jsxs)("button",{className:"whitespace-nowrap hover:text-gray-200 ml-2",onClick:u,children:[(0,a.jsx)("i",{className:"fas fa-thumbs-down"}),(0,a.jsx)("span",{className:"ml-1",children:"No"})]})]})]}):void 0===c?(0,a.jsxs)("div",{className:"text-gray-500 mt-6",children:[(0,a.jsx)("p",{className:"my-0",children:"Would you like to leave a comment (optional)?"}),(0,a.jsxs)("form",{onSubmit:p,className:"flex flex-col gap-2 mt-1",children:[(0,a.jsx)("textarea",{className:"bg-gray-800 rounded text-xs p-2 md:max-w-sm",rows:2}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:"btn text-xs bg-blue-600 rounded hover:bg-blue-500 transition-colors",children:"Send Feedback"})})]})]}):(0,a.jsx)("div",{className:"text-gray-500 mt-6",children:(0,a.jsx)("p",{className:"my-0",children:"Thank you for your feedback!"})}):null}function h(e){let{initialHeadingLevel:t=1}=e,n=(0,o.CG)(e=>e.chat.versions);function r(e){let{level:t,className:n,children:a}=e;return s.createElement("h".concat(t),{className:n},a)}return(0,a.jsx)("div",{children:(0,a.jsx)("ol",{className:"m-0 p-0",children:n.map((e,s)=>(0,a.jsxs)("li",{className:"pl-0 my-0",id:"prompt-".concat(s),children:[s>0&&(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"relative text-blue-400",children:(0,a.jsxs)(r,{level:0===s?t:t+1,children:[(0,a.jsx)("i",{className:"opacity-60 absolute hidden md:block fas fa-quote-left",style:{top:"0.25em",width:"2rem",left:"-2.5rem",textAlign:"right",fontSize:"0.825em"}}),e.instructions]})}),(0,a.jsx)("div",{className:"mb-8 text-blue-400 ".concat(0===s?"text-sm":"text-xs"),children:e.language})]}),e.response?(0,a.jsx)("div",{className:"version",children:(0,a.jsx)(p.IV,{children:e.response})}):e.error?(0,a.jsx)("div",{className:"version",children:(0,a.jsx)("p",{children:"We're having trouble handling that request. Please try again, or choose another model."})}):(0,a.jsxs)("div",{className:"loading-spinner",children:[(0,a.jsx)("div",{className:"b1"}),(0,a.jsx)("div",{className:"b2"}),(0,a.jsx)("div",{className:"b3"})]}),e.showFeedback?(0,a.jsx)("div",{className:s===n.length-1?"mb-6":"mb-0",children:(0,a.jsx)(m,{versionNumber:s})}):(0,a.jsx)("br",{})]},s))})})}var f=n(95887),g=n(12898),x=n(32859),v=n(2950),b=n(69859);async function y(e,t){return b.GK({name:e},async()=>await t())}let w="duration-500",j={TypeScript:"TS",JavaScript:"JS",Python:"Py",Go:"Go","C#":"C#",Java:"Java",YAML:"YAML",Terraform:"TF"};function N(){!function(){var e;let t=(0,o.TL)(),n=(!!(null===(e=(0,x.useSearchParams)())||void 0===e?void 0:e.get("autoSubmit"))).valueOf(),a=(0,s.useRef)(!1);(0,s.useEffect)(()=>{!a.current&&(a.current=!0,n&&_(t))},[n,t])}();let{modeBackgroundTransform:e}=k(),t=(0,o.TL)(),n=(0,s.useCallback)(async e=>{e.preventDefault();let{prompt:n}=o.h.getState().chat,a=l.xU(o.h.getState()),r=!a&&""!==n.trim();if(r)try{window.scrollTo(0,document.body.scrollHeight),await y("Send AI Prompt",()=>_(t))}catch(e){console.error(e)}},[t]);return(0,a.jsxs)("div",{className:"sticky not-prose b-0 pb-4 lg:pb-12 bottom-0 z-30 overflow-hidden",children:[(0,a.jsxs)("div",{className:"\n                    shadow-[0_10px_25px_-5px_rgba(0,0,0,0.5)]\n                    rounded-lg\n                    relative\n                    overflow-hidden\n                ",children:[(0,a.jsx)("div",{className:"\n                        absolute\n                        top-0\n                        left-0\n                        z-[-1]\n                        w-[500%]\n                        h-[500%]\n                        ai-mode-gradient\n                        transition-transform\n                        ".concat(e,"\n                    ")}),(0,a.jsx)("div",{className:"\n                        m-0.5\n                        py-2 px-2\n                        dark:bg-gray-850\n                        bg-gray-300\n                        rounded-md\n                    ",children:(0,a.jsxs)("form",{onSubmit:n,children:[(0,a.jsx)("div",{className:"flex items-center bg-opacity-30",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(C,{}),(0,a.jsx)(I,{})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"chat-status text-xs text-gray-700 text-left mt-2 flex items-center gap-1",children:[(0,a.jsx)(T,{}),(0,a.jsx)("span",{children:"|"}),(0,a.jsx)(A,{})]}),(0,a.jsx)("div",{className:"chat-share absolute right-0 bottom-px text-xs",children:(0,a.jsx)(L,{})})]})]})})]}),(0,a.jsx)("div",{className:"absolute w-full h-full top-0 z-[-2] rounded-t-lg bg-gray-900 bg-opacity-95"})]})}function k(){let e,t;let n=(0,o.CG)(e=>e.chat.responseMode);return"explain"===n?(e="bg-brand-fuchsia disabled:bg-brand-fuchsia/60 transition-background ".concat(w),t="translate-y-[-23.3%] translate-x-[-23.3%]"):"balanced"===n?(e="bg-brand-purple disabled:bg-brand-purple/60 transition-background ".concat(w),t="translate-y-[-52.0%] translate-x-[-52.0%]"):(e="bg-brand-violet disabled:bg-brand-violet/60 transition-background ".concat(w),t="translate-y-[-80.0%] translate-x-[-80.0%]"),{modeBackgroundTransform:t,modeBackground:e}}function C(){return(0,a.jsx)("ul",{className:"inline-flex list-none p-0 m-0",children:r.s5.map(e=>(0,a.jsx)(S,{language:e},e))})}function S(e){let{language:t}=e,n=(0,o.TL)(),r=(0,o.CG)(l.xU),i=(0,o.CG)(e=>e.chat.language),{modeBackground:c}=k(),d=(0,s.useCallback)(()=>{n(o.Nw.chat.setLanguage(t))},[n]),u=(0,s.useRef)(null),p=(0,s.useCallback)(e=>{if("Enter"===e.key){if(d(),e.target instanceof HTMLButtonElement){var t;null===(t=e.target.form)||void 0===t||t.requestSubmit()}e.preventDefault()}},[]),m=t===i?"".concat(c," text-white cursor-default"):"\n                    cursor-pointer\n                    dark:bg-gray-700\n                    bg-white\n                    text-gray-700\n                    dark:text-gray-400\n                ",h="m-2 mt-1 ml-0";return"Terraform"===t&&(h+=" hidden min-[420px]:inline"),(0,a.jsx)("li",{className:h,children:(0,a.jsxs)("button",{ref:u,title:"Generate code in ".concat(t),name:t,type:"button",onKeyDown:p,className:"".concat(m," rounded\n                        p-1 px-1\n                        min-[350px]:p-2 min-[350px]:px-2.5\n                        min-[520px]:p-2 min-[520px]:px-4\n                        text-xs w-auto xl:px-6 text-center\n                        disabled:cursor-default disabled:opacity-70"),onClick:d,disabled:r,children:[(0,a.jsx)("span",{className:"inline md:hidden",children:j[t]}),(0,a.jsx)("span",{className:"hidden md:inline",children:t})]})})}function I(){let e,t;let n=(0,o.TL)(),r=(0,s.useRef)(null),i=(0,o.CG)(e=>e.chat.versions.length>=1),c=(0,o.CG)(e=>e.chat.prompt),d=(0,o.CG)(l.xU),u=(0,o.CG)(e=>e.chat.language),{modeBackground:p}=k(),[m,h]=(0,s.useState)(1),f=!d&&""!==c.trim(),g=s.useCallback(e=>{e.target.style.height="0px";let t=e.target.scrollHeight,n=parseInt(getComputedStyle(e.target).paddingTop,10)+parseInt(getComputedStyle(e.target).paddingBottom,10),a=parseInt(getComputedStyle(e.target).lineHeight,10);h(Math.max(1,Math.min(Math.floor((t-n)/a),7))),e.target.style.height=""},[]),x=(0,s.useCallback)(e=>{n(o.Nw.chat.setInput(e.target.value))},[n]);(0,s.useEffect)(()=>{g({target:r.current})},[g,c]);let v="";i&&!d?(e="Update program",t="fas fa-arrow-circle-up",v="Example: Add a serverless REST API."):i&&d?(e="Thinking...",t="fas fa-spin fa-cog"):i||d?(e="Responding...",t="fas fa-spin fa-cog"):(e="Generate program",t="fas fa-arrow-circle-right",v="Example: A static website on AWS behind a CDN."),(0,s.useEffect)(()=>{!d&&r.current&&(r.current.disabled=!1,r.current.focus({preventScroll:!0}))},[d]);let b=s.useCallback(e=>{if("Enter"===e.key){if(e.shiftKey&&m<7){h(e=>e+1);return}if(e.preventDefault(),f&&(1===m||e.ctrlKey||e.metaKey)&&(null==e?void 0:e.target)instanceof HTMLTextAreaElement){var t;null===(t=e.target.form)||void 0===t||t.requestSubmit()}}},[m,f]);return(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-center",children:[(0,a.jsx)("textarea",{ref:r,id:"message",rows:m,placeholder:v,value:c,onInput:g,onChange:x,maxLength:10240,onKeyDown:b,disabled:d,className:"resize-none outline-none border-none w-full leading-relaxed rounded text-sm dark:bg-gray-800 bg-white p-3 dark:text-white text-black lg:mr-2 mb-2 lg:mb-0 placeholder:text-gray-600 disabled:opacity-70"}),(0,a.jsx)("div",{className:"w-full lg:w-auto",children:(0,a.jsxs)("button",{title:"Generate Pulumi ".concat(u," program"),className:"flex flex-1 btn ".concat(p," w-full lg:w-auto outline-none border-none cursor-pointer items-center text-sm justify-center p-3 leading-6 text-white\n    whitespace-nowrap\n    disabled:cursor-default disabled:text-gray-400\n    "),type:"submit",disabled:!f,children:[(0,a.jsx)("span",{className:"label",children:e}),(0,a.jsx)("span",{className:"icon fas ".concat(t," ml-2")})]})})]})}function T(){return(0,a.jsxs)("span",{className:"list-none p-0 m-0 inline-flex",children:[(0,a.jsx)("span",{className:"mr-1",children:"GPT"}),(0,a.jsx)("span",{children:v.k.map(e=>(0,a.jsx)(M,{model:e},e))})]})}let P={"gpt-4":"v4","gpt-4-turbo":"v4-Turbo"};function M(e){let{model:t}=e,n=(0,o.TL)(),r=(0,o.CG)(e=>e.chat.model),i=(0,s.useCallback)(()=>{globalThis.localStorage&&localStorage.setItem(l.Bh,t),n(o.Nw.chat.setModel(t))},[n,t]),c="no-underline mx-0.5 py-0.5 px-1 rounded bg-opacity-30 transition-colors";return c+=r===t?" ".concat("text-gray-200 cursor-default bg-gray-600 bg-opacity-30"):" ".concat("text-gray-700 cursor-pointer hover:text-gray-600 hover:bg-gray-800"),(0,a.jsx)("a",{className:c,onClick:i,children:P[t]})}function L(){let[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)(!1),[l,i]=(0,s.useState)(!1),c=(0,s.useRef)(null),d=(0,o.CG)(e=>e.chat.conversationId),u=(0,s.useCallback)(()=>{let n=!e;t(n),!1===n&&(c.current&&(clearTimeout(c.current),c.current=null),r(!1),i(!1))},[e]),p=(0,s.useCallback)(async()=>{try{await navigator.clipboard.writeText(U(d).toString())}catch(e){console.error("Unexpected error copying to clipboard",e)}let e=!n;r(e),e&&(c.current&&(clearTimeout(c.current),c.current=null),c.current=setTimeout(()=>{c.current&&(t(!1),r(!1))},2e3))},[n,d]);if(!d)return null;let m=null;return e&&(m=(0,a.jsxs)("ul",{className:"share-button-options relative px-1 py-4",children:[(0,a.jsx)("div",{className:"caret"}),(0,a.jsx)("li",{className:n?"disabled":"",onClick:p,children:(0,a.jsxs)("span",{children:[(0,a.jsx)("i",{className:"fas fa-link"}),n?"Link Copied!":"Copy Link"]})}),(0,a.jsx)("li",{className:l?"disabled":"",children:(0,a.jsxs)("a",{href:function(e){let t=U(e),n="".concat("Check out what I generated with Pulumi AI!"," ").concat(t.toString());return"https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(n))}(d),target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)("i",{className:"fab fa-twitter"}),"Share on Twitter"]})})]})),(0,a.jsxs)("div",{className:"share-button",children:[m,(0,a.jsx)("div",{className:"share-link",onClick:u,children:(0,a.jsxs)("span",{children:[(0,a.jsx)("i",{className:"fas fa-share-square"}),(0,a.jsxs)("span",{className:"hidden min-[410px]:inline",children:[" ","Share",(0,a.jsx)("span",{className:"hidden min-[490px]:inline",children:" conversation"})]})]})})]})}function A(){let e=(0,o.TL)(),t=(0,o.CG)(e=>e.chat.responseMode),n=(0,s.useRef)(t),r=(0,o.CG)(e=>e.chat.hasTyped),l=(0,s.useRef)();return(0,s.useEffect)(()=>{if(!r||!l.current)return;let t=o.h.getState();t.chat.hasTyped&&t.chat.responseMode===l.current&&t.chat.responseMode!==n.current&&e(o.Nw.chat.setResponseMode(n.current))},[e,r]),(0,s.useEffect)(()=>{let t=e=>{let t=o.h.getState();return!t.chat.hasTyped&&t.chat.responseMode===e&&0===t.chat.versions.length};if(!t(n.current))return;let a=()=>new Promise(e=>setTimeout(e,1500)),r=async()=>{if(await a(),t(n.current)){for(let n of["explain","balanced","code"])if(e(o.Nw.chat.setResponseMode(n)),l.current=n,await a(),!t(n))return;e(o.Nw.chat.setResponseMode(n.current))}};r()},[e]),(0,a.jsxs)("span",{className:"list-none p-0 m-0 inline-flex",children:[(0,a.jsx)("span",{className:"mx-1",children:"Mode"}),(0,a.jsxs)("span",{children:[(0,a.jsx)(R,{mode:"explain"}),(0,a.jsx)(R,{mode:"balanced"}),(0,a.jsx)(R,{mode:"code"})]})]})}let E={explain:"Have Pulumi AI explain its answers in detail.",balanced:"Have Pulumi AI generate a balanced answer of explanation and code.",code:"Have Pulumi AI generate code with minimal explanation."},G={explain:"bg-brand-fuchsia",balanced:"bg-brand-purple",code:"bg-brand-violet"};function R(e){let{mode:t}=e,n=(0,o.TL)(),r=(0,o.CG)(e=>e.chat.responseMode),l=(0,s.useCallback)(()=>{n(o.Nw.chat.setResponseMode(t))},[n,t]),i="no-underline mx-0.5 py-0.5 px-1.5 rounded transition-colors ".concat(w),c=r===t?"".concat(i," bg-opacity-80 text-white cursor-default"):"".concat(i," bg-opacity-10 text-gray-500 cursor-pointer hover:bg-opacity-30 hover:text-gray-200");c+=" ".concat(G[t]);let d=E[t];return(0,a.jsx)("a",{title:d,className:c,onClick:l,children:t})}function U(e){let t=new URL(window.location.href);return t.pathname=H(e),t.search="",t}function H(e){return"".concat("/ai","/conversations/").concat(e)}async function _(e){let t=o.h.getState().chat,n=(0,i.DE)(o.Nw.chat,e),a=t.versions.length;n.addVersion({id:"",complete:!1,instructions:t.prompt,response:"",feedbackHelpful:void 0,feedbackSubmitted:void 0}),n.setInput("");let r={},s=0,l=performance.now(),c=l,d=new AbortController,u=await fetch("".concat("/ai","/api/chat"),{method:"POST",body:JSON.stringify({connectionId:t.connectionId,conversationId:t.conversationId,model:t.model,responseMode:t.responseMode,instructions:t.prompt,language:t.language,version:t.versions.length,flags:function(){var e,t;if(!(null===(t=window)||void 0===t?void 0:null===(e=t.location)||void 0===e?void 0:e.search))return{};let n=new URLSearchParams(window.location.search),a={};return n.forEach((e,t)=>{a[t]=e}),a}()}),signal:d.signal,cache:"no-cache"}),p=u.headers.get("x-version-id"),m=u.headers.get("x-conversation-id"),h=u.headers.get("x-connection-id"),x="false"!==u.headers.get("x-show-feedback");if(!u.ok||!u.body||!p||!m||!h){d.abort(),n.closeVersion({versionNumber:a,error:!0}),n.setInput(t.prompt),f.Tb(Error("Unexpected response from server: ".concat(u.status)));return}n.setShowFeedback({showFeedback:x}),n.setConversationInfo({conversationId:m,connectionId:h}),n.setVersionId({versionNumber:a,id:p}),window.history.pushState({},"",function(e){let t=H(e),n=new URLSearchParams(window.location.search).toString();return n&&(n="?".concat(n)),"".concat(t).concat(n)}(m));let v="",b=0,y=!1,w=!1,j=u.body.getReader(),N=[],k=0,C=async()=>{let e=()=>o.h.getState().chat.versions[a].cancelled,t=(0,g.NX)();for(;;){let{done:n,value:a}=await j.read();if(n){k=(v.length-b)*4;break}let o=t(a);v+=o,y=!0;let l=performance.now(),i=l-c;N.push(i),c=l,r[s++]={chars:o.length,time:i};let u=[...N.slice(1)];if(0===u.length)k=0;else{u.sort((e,t)=>e-t);let e=u[Math.floor(.9*u.length)];k=Math.floor((v.length-b)/(e/1e3))}if(e()){d.abort();break}}w=!0},S=async()=>{let e=()=>new Promise(e=>{window.requestAnimationFrame(e)});for(;!y;)await e();let t=performance.now();for(;;){if(await e(),b>=v.length){if(w)break;continue}let r=performance.now(),s=r-t;t=r;let o=v.length-b,l=Math.max(1,Math.floor(60*(s/1e3))),i=Math.max(1,Math.round(k*(s/1e3))),c=Math.min(o,Math.max(l,i)),d=v.slice(b,b+c);b+=c,n.receiveResponseChunk({versionNumber:a,chunk:d})}};await Promise.all([C(),S()]),n.closeVersion({versionNumber:a})}function D(e){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)(V,{...e}),children:(0,a.jsx)(B,{...e})})}function V(e){let{initialState:t,initialConversationHeadingLevel:n=2,header:r,sidebar:s,params:o}=e;return c({initialState:t}),(0,a.jsx)(B,{initialState:t,initialConversationHeadingLevel:n,header:r,sidebar:s,params:o})}function B(e){var t,n,i,d,u,p;let{initialState:m,initialConversationHeadingLevel:f=2,header:g,sidebar:x,params:b}=e,y=null!==(i=null!==(n=b.prompt)&&void 0!==n?n:null==m?void 0:m.prompt)&&void 0!==i?i:"",w=null!==(u=null!==(d=(0,r.mP)(b.language))&&void 0!==d?d:null==m?void 0:m.language)&&void 0!==u?u:"TypeScript",j=b.mockVelocity,k=b.mock?{enabled:!0,velocity:j?Number.parseFloat(j):1}:void 0;c({initialState:m={...l.UX,...m,language:w,prompt:y},mock:k});let C=(0,o.TL)();(0,s.useLayoutEffect)(()=>{if(!globalThis.localStorage)return;let e=globalThis.localStorage.getItem(l.Bh);if(e){if(e===(null==m?void 0:m.model)){localStorage.removeItem(l.Bh);return}for(let t of v.k)if(e===t){C(l.Nw.setModel(t));return}localStorage.removeItem(l.Bh)}},[m,C]);let S=(0,o.CG)(e=>e.chat.versions.length),I="flex-col",T=null!==(p=null===(t=m.versions)||void 0===t?void 0:t.length)&&void 0!==p?p:0;return S>T&&(I="flex-col-reverse"),(0,a.jsx)("div",{className:"flex ".concat(I," overflow-y-auto h-full prose-sm dark:prose-invert"),children:(0,a.jsxs)("div",{className:"flex flex-grow flex-row container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"lg:w-8/12 flex flex-col w-full pt-10",children:[(0,a.jsx)("div",{className:"flex flex-grow w-full flex-wrap",children:(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[g&&0===S?(0,a.jsxs)("div",{children:[(0,a.jsx)("header",{children:g}),(0,a.jsx)("hr",{})]}):null,(0,a.jsx)("div",{className:"prompts",children:(0,a.jsx)(h,{initialHeadingLevel:f})})]})}),(0,a.jsx)(N,{})]}),(0,a.jsx)("div",{className:"lg:w-4/12 text-sm hidden lg:block",children:(0,a.jsx)("div",{className:"sticky top-4",children:(0,a.jsx)("aside",{className:"sidebar mt-4 pl-8 ml-8 border-l border-divider prose-sm dark:prose-invert overflow-y-auto h-auto text-gray-500",children:x})})})]})})}},99795:function(e,t,n){n.r(t),n.d(t,{Sidebar:function(){return l},SidebarContent:function(){return i}});var a=n(27573),r=n(81451),s=n(68403),o=n(89351);function l(e){let{heading:t}=e;return(0,a.jsxs)("div",{className:"pb-8",children:[(0,a.jsx)("div",{className:"prose prose-sm prose-invert my-6",children:t}),(0,a.jsx)(i,{}),(0,a.jsx)("br",{}),(0,a.jsx)(s.n,{})]})}function i(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{}),(0,a.jsx)(r.IV,{CodeBlock:r.vd,children:"### Create an Issue\n\nFile a feature request or bug [on GitHub](https://github.com/pulumi/pulumi-ai/issues)!\n\n### Pulumi AI Answers\n\nPulumi AI's top answers, curated by us."})]})}},5537:function(e,t,n){n.d(t,{Nw:function(){return d},h:function(){return c},TL:function(){return u},CG:function(){return p}});var a=n(75094),r=n(30335),s=n(25272),o=n(84862);let l=(0,s.UY)({chat:o.I6}),i={chat:o.Nw},c=a.xC({reducer:l}),d=i,u=r.I0,p=r.v9},84862:function(e,t,n){n.d(t,{Bh:function(){return o},I6:function(){return u},Nw:function(){return d},UX:function(){return l},xU:function(){return c}});var a=n(75094),r=n(24243),s=n(2950);let o="pulumi-ai/chat/model",l={versions:[],language:"TypeScript",model:s.H,responseMode:"balanced",prompt:"",hasTyped:!1},i=(0,a.oM)({name:"chat",initialState:l,reducers:{init:(e,t)=>t.payload,setConversationInfo:(e,t)=>{e.connectionId=t.payload.connectionId,e.conversationId=t.payload.conversationId},addVersion:(e,t)=>{e.versions.push({...t.payload,language:e.language})},setVersionId:(e,t)=>{let n=e.versions.at(t.payload.versionNumber);if(!n)throw Error("Invalid version ".concat(t.payload.versionNumber));n.id=t.payload.id},receiveResponseChunk:(e,t)=>{let n=e.versions.at(t.payload.versionNumber);if(!n)throw Error("Invalid version ".concat(t.payload.versionNumber));n.response+=t.payload.chunk},closeVersion:(e,t)=>{let n=e.versions.at(t.payload.versionNumber);if(!n)throw Error("Invalid version ".concat(t.payload.versionNumber));t.payload.chunk&&(n.response+=t.payload.chunk),t.payload.error&&(n.error=t.payload.error),n.complete=!0},setInput:(e,t)=>{e.prompt=t.payload,e.lastAutoPrompt="",e.hasTyped=!0},setLanguage:(e,t)=>{!function(e,t){let n=e.versions.at(-1);if(!n)return;let a=""===e.prompt||e.lastAutoPrompt===e.prompt;if(!a)return;let r=e.language!==t;if(!r)return;let s=n.language===t;if(s){e.prompt="",e.lastAutoPrompt=e.prompt;return}r&&a&&(e.prompt="Rewrite this program in ".concat(t),e.hasTyped=!0,e.lastAutoPrompt=e.prompt)}(e,t.payload),e.language=t.payload},setModel:(e,t)=>{e.model=t.payload},setResponseMode:(e,t)=>{e.responseMode=t.payload},setResponseHelpful:(e,t)=>{let n=e.versions.at(t.payload.versionNumber);if(!n)throw Error("Invalid version ".concat(t.payload.versionNumber));n.feedbackHelpful=t.payload.helpful},setResponseSubmitted:(e,t)=>{let n=e.versions.at(t.payload.versionNumber);if(!n)throw Error("Invalid version ".concat(t.payload.versionNumber));n.feedbackSubmitted=t.payload.submitted},setShowFeedback:(e,t)=>{let n=e.versions.at(-1);if(!n)throw Error("Invalid action, cannot set show feedback on empty versions");n.showFeedback=t.payload.showFeedback}}}),c=(0,r.P1)(e=>e.chat,e=>e.versions.some(e=>!e.complete)),d=i.actions,u=i.reducer},51814:function(e,t,n){n.d(t,{mP:function(){return s},s5:function(){return r}});var a=n(68449);a.z.string().transform((e,t)=>{let n=s(e);return n||(t.addIssue({code:a.z.ZodIssueCode.custom,message:"Invalid Pulumi language: ".concat(e),path:[]}),a.z.NEVER)});let r=["TypeScript","JavaScript","Python","Go","C#","Java","YAML","Terraform"];function s(e){if(e)switch(e.toLowerCase()){case"typescript":return"TypeScript";case"javascript":return"JavaScript";case"python":return"Python";case"go":return"Go";case"c#":case"csharp":return"C#";case"java":return"Java";case"yaml":return"YAML";case"terraform":return"Terraform";default:return}}}}]);